flowinsight-farm:
  image: registry.aarnet.net.au/insight/farm 
  labels:
    io.rancher.container.hostname_override: container_name
    io.rancher.scheduler.affinity:container_label_ne: io.rancher.stack_service.name=$${stack_name}/$${service_name}
    io.rancher.scheduler.affinity:host_label: flowinsight_role=pipeline
  ports:
    - "9797:22"  
  volumes: "/home/rgr/init_data:/srv/insight/init_data"
  entrypoint:
    - /usr/local/bin/farm_entrypoint.sh
  command:
    - /srv/insight/init_data +blerp26 %gickle
   
    
#flowinsight-farm:
#  image: rancher/elasticsearch-conf:v0.5.0
#  labels:
#    io.rancher.container.hostname_override: container_name
#    io.rancher.sidekicks: elasticsearch-base-datanode,elasticsearch-datavolume-datanode
#    io.rancher.scheduler.affinity:container_label_ne: io.rancher.stack_service.name=$${stack_name}/$${service_name}
#    io.rancher.scheduler.affinity:host_label: es_node=es_data
#  links:
#    - elasticsearch-masters:es-masters
#  volumes_from:
#    - elasticsearch-datavolume-datanode
#  ports:
#    - "9200:9200"
#  environment:
#    ES_JAVA_OPTS: -Xms31g -Xmx31g 
#flowinsight-farm-datavolume:
#  labels:
#    elasticsearch.datanode.config.version: '0'
#    io.rancher.container.hostname_override: container_name
#    io.rancher.container.start_once: true
#  volumes:
#    - /disks/ssde/elasticsearch_data:/data0
#    - /disks/ssdf/elasticsearch_data:/data1
#    - /usr/share/elasticsearch/config
#    - /opt/rancher/bin
#  entrypoint: /bin/true
#  image: elasticsearch:2.4.3-alpine
#flowinsight-farm-base:
#  labels:
#    elasticsearch.datanode.config.version: '0'
#    io.rancher.container.hostname_override: container_name
#  image: elasticsearch:2.4.3-alpine
#  links:
#    - elasticsearch-masters:es-masters
#  entrypoint:
#    - /opt/rancher/bin/run.sh
#  volumes_from:
#    - elasticsearch-datavolume-datanode
#  net: "container:elasticsearch-datanodes"

